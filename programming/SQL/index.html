<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="created from this free course
Table of Contents  Definitions Statements  Create Select Insert into Alter table Update Delete from Order by Limit Case Group by Having   Constraints Data types WHERE operators    Wildcards     Aggregates  Count Sum Max, min, avg  Round     Multiple tables  Join  Foreign key   Left join Cross join Union With   Other keywords    IFNULL OFFSET   IN   Functions  DATE_ADD        Definitions Table a."><title>SQL</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/svg href=https://llesha.github.io//avatar.svg><link href=https://llesha.github.io/styles.eeff98fe91a97450818181a0be859aa0.min.css rel=stylesheet><link href=https://llesha.github.io/styles/_light_syntax.e923b5986cd928fbf9d7a05f9c569013.min.css rel=stylesheet id=theme-link><script src=https://llesha.github.io/js/darkmode.7b214e6ee7c799364855d98f52fd8d27.min.js></script>
<script src=https://llesha.github.io/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://llesha.github.io/js/popover.53ad9a087e3feeaaa12b63bfd02d923b.min.js></script>
<script src=https://llesha.github.io/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://llesha.github.io/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://llesha.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://llesha.github.io/",fetchData=Promise.all([fetch("https://llesha.github.io/indices/linkIndex.5a75480e3b6b2d5bcbee4cb029cef8b4.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://llesha.github.io/indices/contentIndex.b52540bf86661fae2f16eaf6551147d3.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://llesha.github.io",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://llesha.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:10,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:10,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:10,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:10,opacityScale:3,repelForce:1,scale:1.4})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/llesha.github.io\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://llesha.github.io/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://llesha.github.io/>llesha</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>SQL</h1><p class=meta>Last updated
Sep 30, 2022</p><ul class=tags></ul><p><em>created from
<a href=https://www.codecademy.com/courses/learn-sql rel=noopener>this free course</a></em></p><div class=toc><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#definitions>Definitions</a></li><li><a href=#statements>Statements</a><ol><li><a href=#create>Create</a></li><li><a href=#select>Select</a></li><li><a href=#insert-into>Insert into</a></li><li><a href=#alter-table>Alter table</a></li><li><a href=#update>Update</a></li><li><a href=#delete-from>Delete from</a></li><li><a href=#order-by>Order by</a></li><li><a href=#limit>Limit</a></li><li><a href=#case>Case</a></li><li><a href=#group-by>Group by</a></li><li><a href=#having>Having</a></li></ol></li><li><a href=#constraints>Constraints</a></li><li><a href=#data-types>Data types</a></li><li><a href=#where-operators><code>WHERE</code> operators</a><ol><li><ol><li><a href=#wildcards>Wildcards</a></li></ol></li></ol></li><li><a href=#aggregates>Aggregates</a><ol><li><a href=#count>Count</a></li><li><a href=#sum>Sum</a></li><li><a href=#max-min-avg>Max, min, avg</a><ol><li><a href=#round>Round</a></li></ol></li></ol></li><li><a href=#multiple-tables>Multiple tables</a><ol><li><a href=#join>Join</a><ol><li><a href=#foreign-key>Foreign key</a></li></ol></li><li><a href=#left-join>Left join</a></li><li><a href=#cross-join>Cross join</a></li><li><a href=#union>Union</a></li><li><a href=#with>With</a></li></ol></li><li><a href=#other-keywords>Other keywords</a><ol><li><ol><li><a href=#ifnull>IFNULL</a></li><li><a href=#offset>OFFSET</a></li></ol></li><li><a href=#in>IN</a></li></ol></li><li><a href=#functions>Functions</a><ol><li><a href=#date_add>DATE_ADD</a></li></ol></li></ol></nav></details></aside></div><a href=#definitions><h2 id=definitions><span class=hanchor arialabel=Anchor># </span>Definitions</h2></a><p><strong>Table</strong> a.k.a relation</p><p><strong>Column</strong> - set of data values of particular type</p><p><strong>Row</strong> - a single record in a table</p><p><strong>Statement</strong> - is a command for database</p><p><strong>Query</strong> - command to retrieve information from database in a table form</p><a href=#statements><h2 id=statements><span class=hanchor arialabel=Anchor># </span>Statements</h2></a><a href=#create><h3 id=create><span class=hanchor arialabel=Anchor># </span>Create</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>celebs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w>   </span><span class=nb>INTEGER</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>age</span><span class=w>  </span><span class=nb>INTEGER</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#select><h3 id=select><span class=hanchor arialabel=Anchor># </span>Select</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>celebs</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Select returns a new table called <strong>result set</strong>. It is a multiset, meaning there might be
duplicates.</p><p><code>AS</code> - keyword to change a name of the result set (or column): <code>SELECT name AS 'new name'</code>. Columns
are not renamed in the original table, only in the resulting one.</p><p><code>DISTINCT</code> - returns a <strong>set</strong> of unique values in column: <code>SELECT DISTINCT tools FROM inventory</code>.</p><a href=#insert-into><h3 id=insert-into><span class=hanchor arialabel=Anchor># </span>Insert into</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>celebs</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>age</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Celeb name&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#alter-table><h3 id=alter-table><span class=hanchor arialabel=Anchor># </span>Alter table</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>celebs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>ADD</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>twitter_handle</span><span class=w> </span><span class=nb>TEXT</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>celebs</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#update><h3 id=update><span class=hanchor arialabel=Anchor># </span>Update</h3></a><p>Edits rows in a table by changing column values</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>UPDATE</span><span class=w> </span><span class=n>celebs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>twitter_handle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;@taylorswift13&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><a href=https://leetcode.com/problems/swap-salary/ rel=noopener>leetcode swap example</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>UPDATE</span><span class=w> </span><span class=n>Salary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>CASE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=k>WHEN</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;f&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;m&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;f&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>END</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#delete-from><h3 id=delete-from><span class=hanchor arialabel=Anchor># </span>Delete from</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>DELETE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>celebs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>twitter_handle</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#order-by><h3 id=order-by><span class=hanchor arialabel=Anchor># </span>Order by</h3></a><p>add <code>DESC</code> at the end to receive reverse order or <code>ASC</code> to get the
opposite. <strong style=color:var(--primary)>Order by always goes after WHERE (if WHERE present)</strong>
.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=k>year</span><span class=p>,</span><span class=w> </span><span class=n>imdb_rating</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>movies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>imdb_rating</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#limit><h3 id=limit><span class=hanchor arialabel=Anchor># </span>Limit</h3></a><p>Specify maximum number of rows in the result set. <code>LIMIT</code> always goes at the very end of the query.
Also, it is not supported in all SQL databases.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=c1>-- get top 3 rated movies in descending order
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>movies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>imdb_rating</span><span class=w> </span><span class=k>DESC</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#case><h3 id=case><span class=hanchor arialabel=Anchor># </span>Case</h3></a><p>Similar to <code>switch</code> in languages to select column.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>CASE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>WHEN</span><span class=w> </span><span class=n>imdb_rating</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>8</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Fantastic&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>WHEN</span><span class=w> </span><span class=n>imdb_rating</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;Poorly Received&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;Avoid at All Costs&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>END</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;Review&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>movies</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#group-by><h3 id=group-by><span class=hanchor arialabel=Anchor># </span>Group by</h3></a><p>Arrange elements into groups by same values. The <code>GROUP BY</code> statement comes after any <code>WHERE</code>
statements, but before <code>ORDER BY</code> or <code>LIMIT</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=c1>-- get number of apps wth more than 20000 downloads
</span></span></span><span class=line><span class=cl><span class=c1>-- in each category
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>category</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>apps</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>downloads</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>20000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>category</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>ORDER BY</code> can use references to columns with index of column in select:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>category</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>price</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>AVG</span><span class=p>(</span><span class=n>downloads</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>apps</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- same as: GROUP BY category, price
</span></span></span></code></pre></td></tr></table></div></div><a href=#having><h3 id=having><span class=hanchor arialabel=Anchor># </span>Having</h3></a><p>For filtering groups, not rows. All types of <code>WHERE</code> clauses are usable with <code>HAVING</code>. <code>HAVING</code>
statement always comes after <code>GROUP BY</code>, but before <code>ORDER BY</code> and <code>LIMIT</code>.</p><p>Use <code>WHERE</code> when:
you want to limit results based on values of individual rows
Use <code>HAVING</code> when:
you want to limit results based on an aggregate property.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>price</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>ROUND</span><span class=p>(</span><span class=k>AVG</span><span class=p>(</span><span class=n>downloads</span><span class=p>)),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>apps</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#constraints><h2 id=constraints><span class=hanchor arialabel=Anchor># </span>Constraints</h2></a><p>Database reject data (<em>constraint violation</em>) if it&rsquo;s not applicable to set constraints:
<code>PRIMARY_KEY</code> - a column marked with it uniquely identifies a row (a record). <strong>Only one column
with <code>PRIMARY_KEY</code> is allowed.</strong>
<code>UNIQUE</code> - similar to primary key, but there might be many <code>UNIQUE</code> columns.
<code>NOT NULL</code> - must have a defined value.
<code>DEFAULT</code> - takes additional argument that if not defined in an <code>insert</code>, will take its value.</p><a href=#data-types><h2 id=data-types><span class=hanchor arialabel=Anchor># </span>Data types</h2></a><p><code>INTEGER</code> - positive or negative
<code>TEXT</code> - string
<code>DATE</code> - YYYY-MM-DD
<code>REAL</code> - decimal</p><a href=#where-operators><h2 id=where-operators><span class=hanchor arialabel=Anchor># </span><code>WHERE</code> operators</h2></a><p>Comparison: <code>=</code>, <code>!=</code> or <code>&lt;></code>, <code>></code>, <code>&lt;</code>, <code>>=</code>, <code>&lt;=</code></p><p><code>LIKE</code> - to compare similar values <code>WHERE name LIKE 'bea_'</code> - if name contains <code>beat</code> and <code>Bear</code>,
it will return both of them. <strong style=color:var(--primary)>Is not case sensitive</strong>.</p><p><code>IS (NOT) NULL</code> - It is not possible to test for null with <code>=</code> and <code>!=</code>.</p><p><code>BETWEEN ... AND ...</code> - similar to Kotlin&rsquo;s <code>in</code>. But has a strange
behavior: <code>WHERE name BETWEEN 'A' AND 'J'</code> - selects all movies starting with &lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;,&mldr; '
F&rsquo;, but not &lsquo;J&rsquo;. However, Movie named &lsquo;J&rsquo; will be selected. For numbers range is inclusive on both
sides.</p><a href=#wildcards><h4 id=wildcards><span class=hanchor arialabel=Anchor># </span>Wildcards</h4></a><ol><li><code>_</code> is a single wildcard character, can be substituted by any other individual character.</li><li><code>%</code> - similar to <code>*</code> in regex. Matches zero or more missing letters.</li></ol><a href=#aggregates><h2 id=aggregates><span class=hanchor arialabel=Anchor># </span>Aggregates</h2></a><a href=#count><h3 id=count><span class=hanchor arialabel=Anchor># </span>Count</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=c1>-- get quantity of free apps
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>apps</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#sum><h3 id=sum><span class=hanchor arialabel=Anchor># </span>Sum</h3></a><p>Calculate sum of particular column values. For non-numeric returns 0.0</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=n>downloads</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>apps</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#max-min-avg><h3 id=max-min-avg><span class=hanchor arialabel=Anchor># </span>Max, min, avg</h3></a><p>The highest, lowest and average value in column. For text uses lexicographical order. <code>AVG</code> for
text returns 0.0</p><a href=#round><h4 id=round><span class=hanchor arialabel=Anchor># </span>Round</h4></a><p>For rounding value. Syntax: <code>ROUND(value)</code> or <code>ROUND(value, digits after dot)</code>.</p><a href=#multiple-tables><h2 id=multiple-tables><span class=hanchor arialabel=Anchor># </span>Multiple tables</h2></a><p>Are combined with</p><a href=#join><h3 id=join><span class=hanchor arialabel=Anchor># </span>Join</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>order_id</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>customers</span><span class=p>.</span><span class=n>customer_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=k>JOIN</span><span class=w> </span><span class=n>customers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=k>ON</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>customer_id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- customer.id will be merged
</span></span></span></code></pre></td></tr></table></div></div><p>Result includes only rows matched on condition. Every other row is dropped. This is called an **
inner join**.</p><a href=#foreign-key><h4 id=foreign-key><span class=hanchor arialabel=Anchor># </span>Foreign key</h4></a><p>When a primary key of another table appears in a table, it is called a <strong>foreign key</strong>.</p><a href=#left-join><h3 id=left-join><span class=hanchor arialabel=Anchor># </span>Left join</h3></a><p>Keeps all rows from the left table.</p><a href=#cross-join><h3 id=cross-join><span class=hanchor arialabel=Anchor># </span>Cross join</h3></a><p>Cross join has m*n rows, where n is number of rows in the first table, m in the second.</p><a href=#union><h3 id=union><span class=hanchor arialabel=Anchor># </span>Union</h3></a><p>Appends one column to another. Restriction: second table should have the same column data types in
the same order as the first one.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>newspaper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>union</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>online</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Note:</strong> unlike join, we have to specify selected columns on union (I think it is for the
flexibility).</p><a href=#with><h3 id=with><span class=hanchor arialabel=Anchor># </span>With</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>WITH</span><span class=w> </span><span class=k>TABLE_NAME</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>NAME</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>WITH</code> allows naming a query. Here <code>TABLE_NAME</code> is a query name and query is <code>...</code> in parentheses.</p><a href=#other-keywords><h2 id=other-keywords><span class=hanchor arialabel=Anchor># </span>Other keywords</h2></a><a href=#ifnull><h4 id=ifnull><span class=hanchor arialabel=Anchor># </span>IFNULL</h4></a><a href=#offset><h4 id=offset><span class=hanchor arialabel=Anchor># </span>OFFSET</h4></a><p>used with limit to shift taken values.</p><a href=#in><h3 id=in><span class=hanchor arialabel=Anchor># </span>IN</h3></a><p>Solution to
<a href=https://leetcode.com/problems/duplicate-emails/ rel=noopener>this leetcode problem</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Email</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>Person</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>email</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>from</span><span class=w> </span><span class=n>Person</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>email</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>having</span><span class=w> </span><span class=k>Count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Same as multiple <code>OR</code>&rsquo;s:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=c1>-- an example with NOT IN
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>Customers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>Country</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Germany&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;France&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;UK&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><a href=#functions><h2 id=functions><span class=hanchor arialabel=Anchor># </span>Functions</h2></a><a href=#date_add><h3 id=date_add><span class=hanchor arialabel=Anchor># </span>DATE_ADD</h3></a><p>syntax: <code>DATE_ADD(date, INTERVAL value unit)</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=c1>-- add 1 day to current date
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>DATE_ADD</span><span class=p>(</span><span class=n>CURDATE</span><span class=p>(),</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>DAY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- remove 2 months from constant date
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2022-30-09&#34;</span><span class=p>,</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=o>-</span><span class=mi>2</span><span class=w> </span><span class=k>MONTH</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/programming/programming-notes/ data-ctx="SQL basics" data-src=/programming/programming-notes class=internal-link>Programming notes</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://llesha.github.io/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by llesha © 2023</p><ul><li><a href=https://llesha.github.io/>Home</a></li><li><a href=https://llesha.itch.io>Itch.io</a></li><li><a href=https://github.com/llesha>Github</a></li><li><a href=https://twitter.com/>Twitter</a></li></ul></footer></div></div></body></html>